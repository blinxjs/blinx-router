!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.BlinxRouter=e():t.BlinxRouter=e()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var a=n[r]={exports:{},id:r,loaded:!1};return t[r].call(a.exports,a,a.exports,e),a.loaded=!0,a.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(10),i=n(6),o=r(i),u=n(7),s=r(u),c=n(8),l=r(c),f=new a.Router5,d={},h={},p=function(t,e){d[t.moduleConfig.name]=t.moduleConfig;var n=function(){var n=d[t.moduleConfig.name];if(n.instanceType&&!e[n.instanceType]&&!e.default)throw Error("Instance Object passed in config-router doesn't have module 'type' that is passed in '$moduleData.moduleName'");return n};t.canActivate=function(t,r,a){var i=n(),o=e[i.instanceType]||e.default;if(f.isActive(t.name,t.params,!0,!1))return!0;h=t;var u=[];Object.keys(f.lastStateAttempt._meta).forEach(function(t){f.areStatesDescendants(Object.assign({params:[]},{name:t}),Object.assign({params:[]},i))&&u.push(t)});var s=u.reduce(function(t,e){return e.split(".").length<t.split(".").length?t:e},"");return i.module.shouldRender&&i.module.shouldRender(t,r)||!i.module.shouldRender?o.createInstance(i,s):void a()},f.canDeactivate(t.name,function(t,r,a){var i=n(),o=e[i.instanceType]||e.default;return!!f.isActive(t.name,t.params,!0,!0)||("function"==typeof i.module.shouldDestroy&&i.module.shouldDestroy(t,r)?o.destroyInstance(i):void 0===i.module.shouldDestroy&&o.destroyInstance(i),i.initialized=!1,!0)})},v=function(t,e){Array.isArray(t)?t.forEach(function(t){t.moduleConfig.name=t.name,p(t,e)}):p(t,e)};e.default={init:function(t){this.instances=t},configure:function(t,e){v(t,this.instances),f.add(t);for(var n in e)f.setOption(n,e[n]);e.logger&&f.usePlugin((0,a.loggerPlugin)()),e.history&&f.usePlugin((0,o.default)()),e.listener&&f.usePlugin((0,l.default)())},register:function(t){v(t,this.instances),f.add(t)},reRegister:function(t){this.register(t),f.stop(),f.lastKnownState=h,f.start()},go:function(t,e,n,r){var a={};n&&(a.reload=!0),r&&(a.replace=!0),f.navigate(t,e,a)},usePlugin:function(t){f.usePlugin(t)},useMiddleware:function(t){f.useMiddleware(t)},start:function(){f.start()},stop:function(){f.stop()},getRouteParams:function(){return Object.keys(h).length>0?Object.assign({},h.params):f.lastStateAttempt.params},addRouteListener:function(){return f.addRouteListener.apply(this,arguments)},addListener:function(){return f.addListener.apply(this,arguments)},addNodeListener:function(){return f.addNodeListener.apply(this,arguments)},getCurrentRoute:function(){return h},navigate:function(t){window.location.href=t},intercept:s.default}},function(t,e){"use strict";function n(t){return t&&"undefined"!=typeof Symbol&&t.constructor===Symbol?"symbol":typeof t}function r(t){return t.split(".").reduce(function(t,e){return t.concat(t.length?t[t.length-1]+"."+e:e)},[])}function a(t,e){return e._meta&&e._meta[t]?Object.keys(e._meta[t]).reduce(function(t,n){return t[n]=e.params[n],t},{}):{}}function i(t,e){function i(){var r=void 0,i=function(){var n=o[r],i=u[r];if(n!==i)return{v:r};var s=a(n,t),c=a(i,e);if(s.length!==c.length)return{v:r};if(0===s.length)return"continue";var l=Object.keys(s).some(function(t){return c[t]!==s[t]});return l?{v:r}:void 0};for(r=0;s>r;r+=1){var c=i();switch(c){case"continue":continue;default:if("object"===(void 0===c?"undefined":n(c)))return c.v}}return r}var o=e&&e.name?r(e.name):[],u=r(t.name),s=Math.min(o.length,u.length),c=void 0;e?e&&(t.name!==e.name||t._meta&&e._meta)?c=i():(console.log("[router5.transition-path] Some states are missing metadata, reloading all segments"),c=0):c=0;var l=o.slice(c).reverse(),f=u.slice(c),d=e&&c>0?o[c-1]:"";return{intersection:d,toDeactivate:l,toActivate:f}}Object.defineProperty(e,"__esModule",{value:!0}),e.nameToIDs=r,e.default=i},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={ROUTER_NOT_STARTED:"NOT_STARTED",ROUTER_ALREADY_STARTED:"ALREADY_STARTED",ROUTE_NOT_FOUND:"ROUTE_NOT_FOUND",SAME_STATES:"SAME_STATES",CANNOT_DEACTIVATE:"CANNOT_DEACTIVATE",CANNOT_ACTIVATE:"CANNOT_ACTIVATE",TRANSITION_ERR:"TRANSITION_ERR",TRANSITION_CANCELLED:"CANCELLED"};e.default=n},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=Object.assign||function(t){for(var e=1;arguments.length>e;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},u=function(){function t(t,e){for(var n=0;e.length>n;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=n(4),c=r(s),l=n(14),f=function(){},d=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments[3];return a(this,t),this.name=e,this.path=n,this.parser=n?new c.default(n):null,this.children=[],this.add(r,i),this}return u(t,[{key:"setPath",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.path=t,this.parser=t?new c.default(t):null}},{key:"add",value:function(e){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f,a=void 0;if(void 0!==e&&null!==e){if(e instanceof Array)return void e.forEach(function(t){return n.add(t,r)});if(!(e instanceof t||e instanceof Object))throw Error("RouteNode.add() expects routes to be an Object or an instance of RouteNode.");if(e instanceof Object){if(!e.name||!e.path)throw Error("RouteNode.add() expects routes to have a name and a path defined.");a=e,e=new t(e.name,e.path,e.children,r)}var i=e.name.split(".");if(1===i.length){if(this.children.map(function(t){return t.name}).indexOf(e.name)!==-1)throw Error('Alias "'+e.name+'" is already defined in route node');if(this.children.map(function(t){return t.path}).indexOf(e.path)!==-1)throw Error('Path "'+e.path+'" is already defined in route node');this.children.push(e),this.children.sort(function(t,e){var n=t.path.split("?")[0].replace(/(.+)\/$/,"$1"),r=e.path.split("?")[0].replace(/(.+)\/$/,"$1");if("/"===n)return 1;if("/"===r)return-1;if(t.parser.hasSpatParam)return 1;if(e.parser.hasSpatParam)return-1;var a=(n.match(/\//g)||[]).length,i=(r.match(/\//g)||[]).length;if(i>a)return 1;if(a>i)return-1;var o=t.parser.urlParams.length,u=e.parser.urlParams.length;if(u>o)return-1;if(o>u)return 1;var s=(n.split("/").slice(-1)[0]||"").length,c=(r.split("/").slice(-1)[0]||"").length;return c>s?1:s>c?-1:0})}else{var o=this.getSegmentsByName(i.slice(0,-1).join("."));if(!o)throw Error("Could not add route named '"+e.name+"', parent is missing.");o[o.length-1].add(new t(i[i.length-1],e.path,e.children))}return a&&r(a),this}}},{key:"addNode",value:function(e,n){return this.add(new t(e,n)),this}},{key:"getSegmentsByName",value:function(t){var e=function(t,e){var n=e.filter(function(e){return e.name===t});return n.length?n[0]:void 0},n=[],r=this.parser?[this]:this.children,a=(this.parser?[""]:[]).concat(t.split(".")),i=a.every(function(t){var a=e(t,r);return!!a&&(r=a.children,n.push(a),!0)});return i?n:null}},{key:"getSegmentsMatchingPath",value:function(t,e){var n=e.trailingSlash,r=e.strictQueryParams,a=function c(t,e,a){var i=1===t.length&&""===t[0].name,u=function(o){var u=t[o],s=u.parser.partialMatch(e),f=void 0;if(!s&&n)s=u.parser.match(e,!0),f="";else if(s){var d=u.parser.build(s,{ignoreSearch:!0});f=e.replace(d,"");var h=(0,l.omit)((0,l.getSearch)(e.replace(d,"")),u.parser.queryParams.concat(u.parser.queryParamsBr));f=(0,l.getPath)(f)+(h?"?"+h:""),!n||i||"/"!==f||/\/$/.test(d)||(f="")}if(s){if(a.push(u),Object.keys(s).forEach(function(t){return a.params[t]=s[t]}),!i&&!f.length)return{v:a};if(!i&&!r&&0===f.indexOf("?")){var p=(0,l.parse)(f.slice(1));return p.forEach(function(t){var e=t.name,n=t.value;return a.params[e]=n}),{v:a}}return u.children.length?{v:c(u.children,f,a)}:{v:null}}};for(var s in t){var f=u(s);if("object"===(void 0===f?"undefined":o(f)))return f.v}return null},i=this.parser?[this]:this.children,u=[];u.params={};var s=a(i,t,u);return s&&1===s.length&&""===s[0].name?null:s}},{key:"getPathFromSegments",value:function(t){return t?t.map(function(t){return t.path}).join(""):null}},{key:"getPath",value:function(t){return this.getPathFromSegments(this.getSegmentsByName(t))}},{key:"buildPathFromSegments",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t)return null;var n=t.filter(function(t){return t.parser.hasQueryParams}).reduce(function(t,e){return t.concat(e.parser.queryParams).concat(e.parser.queryParamsBr.map(function(t){return t+"[]"}))},[]),r=n.length?n.filter(function(t){if(Object.keys(e).indexOf((0,l.withoutBrackets)(t))===-1)return!1;var n=e[(0,l.withoutBrackets)(t)];return void 0!==n&&null!==n}).map(function(t){var n=e[(0,l.withoutBrackets)(t)],r=Array.isArray(n)?n.map(encodeURIComponent):encodeURIComponent(n);return c.default.serialise(t,r)}).join("&"):null;return t.map(function(t){return t.parser.build(e,{ignoreSearch:!0})}).join("")+(r?"?"+r:"")}},{key:"getMetaFromSegments",value:function(t){var e="";return t.reduce(function(t,n){var r=n.parser.urlParams.reduce(function(t,e){return t[e]="url",t},{}),a=n.parser.queryParams.reduce(function(t,e){return t[e]="query",t},r);return void 0!==n.name&&(e=e?e+"."+n.name:n.name,t[e]=a),t},{})}},{key:"buildPath",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.buildPathFromSegments(this.getSegmentsByName(t),e)}},{key:"buildStateFromSegments",value:function(t){if(!t||!t.length)return null;var e=t.map(function(t){return t.name}).filter(function(t){return t}).join("."),n=t.params;return{name:e,params:n,_meta:this.getMetaFromSegments(t)}}},{key:"buildState",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.getSegmentsByName(t);return n&&n.length?{name:t,params:e,_meta:this.getMetaFromSegments(n)}:null}},{key:"matchPath",value:function(t,e){var n={trailingSlash:!1,strictQueryParams:!0};return e=i({},n,e),this.buildStateFromSegments(this.getSegmentsMatchingPath(t,e))}}]),t}();e.default=d,t.exports=e.default},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var n=0;e.length>n;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){return"("+(t?t.replace(/(^<|>$)/g,""):"[a-zA-Z0-9-_.~%]+")+")"},i=[{name:"url-parameter",pattern:/^:([a-zA-Z0-9-_]*[a-zA-Z0-9]{1})(<(.+?)>)?/,regex:function(t){return RegExp(a(t[2]))}},{name:"url-parameter-splat",pattern:/^\*([a-zA-Z0-9-_]*[a-zA-Z0-9]{1})/,regex:/([^\?]*)/},{name:"url-parameter-matrix",pattern:/^\;([a-zA-Z0-9-_]*[a-zA-Z0-9]{1})(<(.+?)>)?/,regex:function(t){return RegExp(";"+t[1]+"="+a(t[2]))}},{name:"query-parameter-bracket",pattern:/^(?:\?|&)(?:\:)?([a-zA-Z0-9-_]*[a-zA-Z0-9]{1})(?:\[\])/},{name:"query-parameter",pattern:/^(?:\?|&)(?:\:)?([a-zA-Z0-9-_]*[a-zA-Z0-9]{1})/},{name:"delimiter",pattern:/^(\/|\?)/,regex:function(t){return RegExp("\\"+t[0])}},{name:"sub-delimiter",pattern:/^(\!|\&|\-|_|\.|;)/,regex:function(t){return RegExp(t[0])}},{name:"fragment",pattern:/^([0-9a-zA-Z]+)/,regex:function(t){return RegExp(t[0])}}],o=function p(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=i.some(function(n){var r=t.match(n.pattern);return!!r&&(e.push({type:n.name,match:r[0],val:r.slice(1,2),otherVal:r.slice(2),regex:n.regex instanceof Function?n.regex(r):n.regex}),t.length>r[0].length&&(e=p(t.substr(r[0].length),e)),!0)});if(!n)throw Error("Could not parse path.");return e},u=function(t,e){return e?t.replace(/\\\/$/,"")+"(?:\\/)?":t},s=function(t){return t.replace(/\[\]$/,"")},c=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";/\[\]$/.test(e)&&(e=s(e),n=[n]);var r=t[e];return t[e]=void 0===r?n:Array.isArray(r)?r.concat(n):[r,n],t},l=function(t){var e=t.split("?")[1];return e?e.split("&").map(function(t){return t.split("=")}).reduce(function(t,e){return c(t,e[0],e[1]?decodeURIComponent(e[1]):e[1])},{}):{}},f=function(t){return void 0!==t&&null!==t&&""!==t?"="+t:""},d=function v(t,e){return Array.isArray(e)?e.map(function(e){return v(t,e)}).join("&"):t+f(e)},h=function(){function t(e){if(n(this,t),!e)throw Error("Please supply a path");this.path=e,this.tokens=o(e),this.hasUrlParams=this.tokens.filter(function(t){return/^url-parameter/.test(t.type)}).length>0,this.hasSpatParam=this.tokens.filter(function(t){return/splat$/.test(t.type)}).length>0,this.hasMatrixParams=this.tokens.filter(function(t){return/matrix$/.test(t.type)}).length>0,this.hasQueryParams=this.tokens.filter(function(t){return/^query-parameter/.test(t.type)}).length>0,this.urlParams=this.hasUrlParams?this.tokens.filter(function(t){return/^url-parameter/.test(t.type)}).map(function(t){return t.val.slice(0,1)}).reduce(function(t,e){return t.concat(e)}):[],this.queryParams=this.hasQueryParams?this.tokens.filter(function(t){return"query-parameter"===t.type}).map(function(t){return t.val}).reduce(function(t,e){return t.concat(e)},[]):[],this.queryParamsBr=this.hasQueryParams?this.tokens.filter(function(t){return/-bracket$/.test(t.type)}).map(function(t){return t.val}).reduce(function(t,e){return t.concat(e)},[]):[],this.params=this.urlParams.concat(this.queryParams).concat(this.queryParamsBr),this.source=this.tokens.filter(function(t){return void 0!==t.regex}).map(function(t){return t.regex.source}).join("")}return r(t,null,[{key:"createPath",value:function(e){return new t(e)}},{key:"serialise",value:function(t,e){return d(t,e)}}]),r(t,[{key:"_urlMatch",value:function(t,e){var n=this,r=t.match(e);return r?this.urlParams.length?r.slice(1,this.urlParams.length+1).reduce(function(t,e,r){return t[n.urlParams[r]]=decodeURIComponent(e),t},{}):{}:null}},{key:"match",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=u(this.source,n),a=this._urlMatch(t,RegExp("^"+r+(this.hasQueryParams?"(\\?.*$|$)":"$")));if(!a||!this.hasQueryParams)return a;var i=l(t),o=Object.keys(i).filter(function(t){return e.queryParams.concat(e.queryParamsBr).indexOf(t)===-1});return 0===o.length?(Object.keys(i).forEach(function(t){return a[t]=i[t]}),a):null}},{key:"partialMatch",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=u(this.source,n),a=this._urlMatch(t,RegExp("^"+r));if(!a)return a;if(!this.hasQueryParams)return a;var i=l(t);return Object.keys(i).filter(function(t){return e.queryParams.concat(e.queryParamsBr).indexOf(t)>=0}).forEach(function(t){return c(a,t,i[t])}),a}},{key:"build",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{ignoreConstraints:!1,ignoreSearch:!1},n=Object.keys(t).reduce(function(e,n){return e[n]=void 0===t[n]?void 0:Array.isArray(t[n])?t[n].map(encodeURI):encodeURI(t[n]),e},{});if(this.urlParams.some(function(e){return void 0===t[e]}))throw Error("Missing parameters");if(!e.ignoreConstraints){var r=this.tokens.filter(function(t){return/^url-parameter/.test(t.type)&&!/-splat$/.test(t.type)}).every(function(t){return RegExp("^"+a(t.otherVal[0])+"$").test(n[t.val])});if(!r)throw Error("Some parameters are of invalid format")}var i=this.tokens.filter(function(t){return/^query-parameter/.test(t.type)===!1}).map(function(t){return"url-parameter-matrix"===t.type?";"+t.val+"="+n[t.val[0]]:/^url-parameter/.test(t.type)?n[t.val[0]]:t.match}).join("");if(e.ignoreSearch)return i;var o=this.queryParams.concat(this.queryParamsBr.map(function(t){return t+"[]"})),u=o.filter(function(t){return Object.keys(n).indexOf(s(t))!==-1}).map(function(t){return d(t,n[s(t)])}).join("&");return i+(u?"?"+u:"")}}]),t}();e.default=h,t.exports=e.default},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){return function(){return t}},r=function(){},a="undefined"!=typeof window,i=function(){return(window.location.pathname+window.location.search).replace(/\/$/,"")},o=function(t,e,n){return window.history.pushState(t,e,n)},u=function(t,e,n){return window.history.replaceState(t,e,n)},s=function(t){return window.addEventListener("popstate",t)},c=function(t){return window.removeEventListener("popstate",t)},l=function(t){var e=t.useHash?window.location.hash.replace(RegExp("^#"+t.hashPrefix),""):window.location.pathname.replace(RegExp("^"+t.base),"");return(e||"/")+(t.ignoreSearch?"":window.location.search)},f=function(){return window.history.state},d={};d=a?{getBase:i,pushState:o,replaceState:u,addPopstateListener:s,removePopstateListener:c,getLocation:l,getState:f}:{getBase:n(""),pushState:r,replaceState:r,addPopstateListener:r,removePopstateListener:r,getLocation:n(""),getState:n(null)},e.default=d},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var a=Object.assign||function(t){for(var e=1;arguments.length>e;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},i=n(5),o=r(i),u=o.default.pushState,s=o.default.replaceState,c=o.default.addPopstateListener,l=o.default.removePopstateListener,f=o.default.getLocation,d=o.default.getBase,h=o.default.getState,p="HISTORY",v=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.forceDeactivate;return function(t){t.getLocation=function(){return f(t.options)},t.replaceHistoryState=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.buildState(e,n),a=t.buildUrl(e,n);t.lastKnownState=r,s(r,"",a)};var n=function(t,e,n){n?s(t,"",e):u(t,"",e)},r=function(r){var i=!r.state||!r.state.name,o=i?t.matchPath(f(t.options)):r.state,u=t.options,s=u.defaultRoute,c=u.defaultParams;if(o){if(!t.lastKnownState||!t.areStatesEqual(o,t.lastKnownState,!1)){var l=a({},t.getState());t._transition(o,l,{forceDeactivate:e},function(r,a){if(r)if(r.redirect)t.navigate(r.redirect.name,r.redirect.params,{forceDeactivate:e,replace:!0});else if("CANNOT_DEACTIVATE"===r){var u=t.buildUrl(t.lastKnownState.name,t.lastKnownState.params);i||n(o,u,!0)}else s&&t.navigate(s,c,{forceDeactivate:e,reload:!0,replace:!0});else t._invokeListeners("$$success",a,l,{replace:!0})})}}else if(s&&t.navigate(s,c,{forceDeactivate:e,reload:!0,replace:!0}),!s){var d={code:"ROUTE_NOT_FOUND"};t._invokeListeners("$$error",null,t.lastKnownState,d),t.lastKnownState=void 0}},i=function(){t.options.useHash&&!t.options.base&&(t.options.base=d()),c(r)},o=function(){l(r)},v=function(e,r,a){var i=h(),o=a.replace||r&&t.areStatesEqual(e,r,!1)||a.reload&&i&&t.areStatesEqual(e,i,!1);n(e,t.buildUrl(e.name,e.params),o)};return{name:p,onStart:i,onStop:o,onTransitionSuccess:v,onPopState:r}}};e.default=v},function(t,e){"use strict";function n(t,e,n){function r(t){return t=t||window.event,null===t.which?t.button:t.which}function a(t){var e={},n=t.split("?");return n[1]&&n[1].length&&n[1].split("&").forEach(function(t){var n=t.indexOf("=");if(n===-1||n===t.length-1)return void(e[window.decodeURIComponent(t)]="");var r=window.decodeURIComponent(t.substr(0,n)),a=window.decodeURIComponent(t.substr(n+1));e[r]=a}),e}return function(i){if(1===r(i)&&!(i.metaKey||i.ctrlKey||i.shiftKey||i.defaultPrevented)){for(var o=i.target;o&&"A"!==o.nodeName;)o=o.parentNode;if(o&&"A"===o.nodeName&&!o.hasAttribute("download")&&"external"!==o.getAttribute("rel")&&!o.target&&o.href){var u=t.matchUrl(o.href);if(u){i.preventDefault();var s,c=u.name,l=a(o.href);s="function"==typeof e?e(c,l):e,t.navigate(c,l,s,n)}}}}}t.exports=function(t,e){return function(r){var a=(document.ontouchstart?"touchstart":"click",n(r,t,e));return{name:"LINK_INTERCEPTOR",onStart:function(){document.addEventListener("click",a,!1)},onStop:function(){document.removeEventListener("click",a)}}}}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function a(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s;return function(e){function n(t,e,n){(i[t]||[]).forEach(function(t){return t(e,n)})}function r(e,r,a){var i=(0,o.default)(e,r),u=i.intersection,c=i.toDeactivate,l=e.name;t.autoCleanUp&&c.forEach(function(t){return s("^"+t)}),n("^"+u,e,r),n("="+l,e,r),n("*",e,r)}function a(){i={}}var i={},s=function(t,n){return n?i[t]&&(i[t]=i[t].filter(function(t){return t!==n})):i[t]=[],e},c=function(t,n,r){var a=t.replace(/^(\*|\^|=)/,"");if(a&&!/^\$/.test(t)){var o=e.rootNode.getSegmentsByName(a);o||console.warn("No route found for "+a+", listener might never be called!")}return i[t]||(i[t]=[]),i[t]=(r?[]:i[t]).concat(n),e};return e.addListener=function(t){return c("*",t)},e.removeListener=function(t){return s("*",t)},e.addNodeListener=function(t,e){return c("^"+t,e,!0)},e.removeNodeListener=function(t,e){return s("^"+t,e)},e.addRouteListener=function(t,e){return c("="+t,e)},e.removeRouteListener=function(t,e){return s("="+t,e)},{name:u,onTransitionSuccess:r,flush:a,listeners:i}}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),o=r(i),u="LISTENERS",s={autoCleanUp:!0};e.default=a},function(t,e){"use strict";function n(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r(t){return t&&"undefined"!=typeof Symbol&&t.constructor===Symbol?"symbol":typeof t}function a(t,e,a){var o=e.isCancelled,u=e.toState,s=e.fromState,c=e.additionalArgs,l=e.errorKey,f=Array.isArray(t)?t:Object.keys(t),d=function(t){return"object"===(void 0===t?"undefined":r(t))&&void 0!==t.name&&void 0!==t.params&&void 0!==t.path},h=function(t){return t.name!==u.name||t.params!==u.params||t.path!==u.path},p=function(e){if(!f.length)return!0;var a="string"==typeof f[0],d=l&&a?n({},l,f[0]):{},h=a?t[f[0]]:f[0],p=h.apply(null,c.concat([u,s,e]));return o()?e(null):"boolean"==typeof p?e(p?null:d):p&&"function"==typeof p.then&&p.then(function(t){t instanceof Error?e({error:t},null):e(null,t)},function(t){t instanceof Error?(console.error(t.stack||t),e(i({},d,{promiseError:t}),null)):e("object"===(void 0===t?"undefined":r(t))?i({},d,t):d,null)}),!1},v=function(t,e){t?a(t):(e&&d(e)&&(h(e)?console.error("[router5][transition] State values changed during transition process and ignored."):u=e),f=f.slice(1),m())},m=function(){if(o())a(null);else{var t=p(v);t&&a(null,u)}};m()}var i=Object.assign||function(t){for(var e=1;arguments.length>e;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};Object.defineProperty(e,"__esModule",{value:!0}),e.default=a},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e.transitionPath=e.errCodes=e.loggerPlugin=e.RouteNode=e.Router5=void 0;var a=n(12),i=r(a),o=n(3),u=r(o),s=n(11),c=r(s),l=n(1),f=r(l),d=n(2),h=r(d);e.default=i.default,e.Router5=i.default,e.RouteNode=u.default,e.loggerPlugin=c.default,e.errCodes=h.default,e.transitionPath=f.default},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){return function(){var t=function(){return console.group("Router transition")},e=function(){return console.groupEnd("Router transition")};return{name:"LOGGER",onStart:function(){console.info("Router started")},onStop:function(){console.info("Router stopped")},onTransitionStart:function(n,r){e(),t(),console.log("Transition started from state"),console.log(r),console.log("To state"),console.log(n)},onTransitionCancel:function(){console.warn("Transition cancelled")},onTransitionError:function(t,n,r){console.warn("Transition error with code "+r.code),e()},onTransitionSuccess:function(){console.log("Transition success"),e()}}}};e.default=n},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function a(t){return t&&"undefined"!=typeof Symbol&&t.constructor===Symbol?"symbol":typeof t}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,e){for(var n=0;e.length>n;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();Object.defineProperty(e,"__esModule",{value:!0});var u=n(3),s=r(u),c=n(13),l=r(c),f=n(2),d=r(f),h=function(){},p=function(t,e){if(!t)throw Error(e)},v=function(t,e,n,r){var a={},i=function(t,e){return Object.defineProperty(a,t,{value:e,enumerable:!0})};return i("name",t),i("params",e),i("path",n),r&&i("_meta",r),a},m=function(t){return function(e){e.canActivate&&t.canActivate(e.name,e.canActivate)}},g=function(t){return"function"==typeof t?t:function(){return t}},y=function(){function t(e){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(this,t),this.started=!1,this.mware=null,this._cbs={},this._canAct={},this._canDeact={},this.lastStateAttempt=null,this.lastKnownState=null,this.rootNode=e instanceof s.default?e:new s.default("","",e,m(this)),this.options={useHash:!1,hashPrefix:"",base:!1,trailingSlash:0,autoCleanUp:!0,strictQueryParams:!0},Object.keys(r).forEach(function(t){return n.options[t]=r[t]}),this.registeredPlugins={},this._extraArgs=[]}return o(t,[{key:"setOption",value:function(t,e){return this.options[t]=e,this}},{key:"setAdditionalArgs",value:function(t){return this._extraArgs=Array.isArray(t)?t:[t],this}},{key:"getAdditionalArgs",value:function(){return this._extraArgs}},{key:"add",value:function(t){return this.rootNode.add(t,m(this)),this}},{key:"addNode",value:function(t,e,n){return this.rootNode.addNode(t,e),n&&(this._canAct[t]=n),this}},{key:"usePlugin",value:function(t){var e=this;p("function"==typeof t,"[router5.usePlugin] Plugins are now functions, see http://router5.github.io/docs/plugins.html.");var n=t(this),r=n.name||t.name;p(r,"[router5.usePlugin] Tried to register an unamed plugin.");var a=["onStart","onStop","onTransitionSuccess","onTransitionStart","onTransitionError","onTransitionCancel"],i=a.some(function(t){return void 0!==n[t]});return p(i,"[router5.usePlugin] plugin "+n.name+" has none of the expected methods implemented"),this.registeredPlugins[r]=n,a.forEach(function(t){n[t]&&e._addListener(t.toLowerCase().replace(/^on/,"$$").replace(/transition/,"$$"),n[t])}),this}},{key:"useMiddleware",value:function(){var t=this;return this.mware=Array.prototype.slice.call(arguments).map(function(e){var n=e(t);return p("function"==typeof n,"[router5.usePlugin] Middleware have changed, see http://router5.github.io/docs/middleware.html."),n}),this}},{key:"start",value:function(){for(var t=this,e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i=n.slice(-1)[0],o=i instanceof Function?i:h,u=void 0,s=void 0;if(this.started)return o({code:d.default.ROUTER_ALREADY_STARTED}),this;this.started=!0,this._invokeListeners("$start");var c=this.options;n.length>0&&("string"==typeof n[0]&&(u=n[0]),"object"===a(n[0])&&(s=n[0]));var l=function(e,n){var r=2>=arguments.length||void 0===arguments[2]||arguments[2];e||t._invokeListeners("$$success",n,null,{replace:!0}),e&&r&&t._invokeListeners("$$error",n,null,e),o(e,n)};return void 0===u&&void 0===s&&this.getLocation&&(u=this.getLocation()),s?(this.lastKnownState=s,o(null,s)):!function(){s=void 0===u?null:t.matchPath(u);var e=function(){return t.navigate(c.defaultRoute,c.defaultParams,{replace:!0},o)},n=function(e){return t.navigate(e.name,e.params,{replace:!0,reload:!0},o)};s?(t.lastStateAttempt=s,t._transition(t.lastStateAttempt,t.lastKnownState,{},function(t,r){t?t.redirect?n(t.redirect):c.defaultRoute?e():l(t,null,!1):l(null,r)})):c.defaultRoute?e():l({code:d.default.ROUTE_NOT_FOUND,path:u},null)}(),this}},{key:"stop",value:function(){return this.started?(this.lastKnownState=null,this.lastStateAttempt=null,this.started=!1,this._invokeListeners("$stop"),this):this}},{key:"getState",value:function(){return this.lastKnownState}},{key:"isActive",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=3>=arguments.length||void 0===arguments[3]||arguments[3],a=this.getState();return!!a&&(n||a.name===t?this.areStatesEqual(v(t,e),a,r):this.areStatesDescendants(v(t,e),a))}},{key:"areStatesEqual",value:function(t,e){var n=this,r=2>=arguments.length||void 0===arguments[2]||arguments[2];if(t.name!==e.name)return!1;var a=function(t){return n.rootNode.getSegmentsByName(t).map(function(t){return t.parser[r?"urlParams":"params"]}).reduce(function(t,e){return t.concat(e)},[])},i=a(t.name),o=a(e.name);return i.length===o.length&&i.every(function(n){return t.params[n]===e.params[n]})}},{key:"areStatesDescendants",value:function(t,e){var n=RegExp("^"+t.name+"\\.(.*)$");return!!n.test(e.name)&&Object.keys(t.params).every(function(n){return t.params[n]===e.params[n]})}},{key:"_invokeListeners",value:function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;e>r;r++)n[r-1]=arguments[r];(this._cbs[t]||[]).forEach(function(t){return t.apply(void 0,n)})}},{key:"_addListener",value:function(t,e){return this._cbs[t]=(this._cbs[t]||[]).concat(e),this}},{key:"canDeactivate",value:function(t,e){return this._canDeact[t]=g(e),this}},{key:"canActivate",value:function(t,e){return this._canAct[t]=g(e),this}},{key:"buildUrl",value:function(t,e){return this._buildUrl(this.buildPath(t,e))}},{key:"_buildUrl",value:function(t){return(this.options.base||"")+(this.options.useHash?"#"+this.options.hashPrefix:"")+t}},{key:"buildPath",value:function(t,e){return this.rootNode.buildPath(t,e)}},{key:"buildState",value:function(t,e){return this.rootNode.buildState(t,e)}},{key:"matchPath",value:function(t){var e=this.options,n=e.trailingSlash,r=e.strictQueryParams,a=this.rootNode.matchPath(t,{trailingSlash:n,strictQueryParams:r});return a?v(a.name,a.params,t,a._meta):null}},{key:"urlToPath",value:function(t){var e=t.match(/^(?:http|https)\:\/\/(?:[0-9a-z_\-\.\:]+?)(?=\/)(.*)$/),n=e?e[1]:t,r=n.match(/^(.+?)(#.+?)?(\?.+)?$/);if(!r)throw Error("[router5] Could not parse url "+t);var a=r[1],i=r[2]||"",o=r[3]||"",u=this.options;return(u.useHash?i.replace(RegExp("^#"+u.hashPrefix),""):u.base?a.replace(RegExp("^"+u.base),""):a)+o}},{key:"matchUrl",value:function(t){return this.matchPath(this.urlToPath(t))}},{key:"_transition",value:function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:h;this.cancel(),this._invokeListeners("$$start",t,e);var i=(0,l.default)(this,t,e,r,function(r,i){return i=i||t,n._tr=null,r?(r.code===d.default.TRANSITION_CANCELLED?n._invokeListeners("$$cancel",t,e):n._invokeListeners("$$error",t,e,r),void a(r)):(n.lastKnownState=i,void a(null,i))});return this._tr=i,function(){return!i||i()}}},{key:"cancel",value:function(){this._tr&&this._tr()}},{key:"navigate",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:h;if(!this.started)return void a({code:d.default.ROUTER_NOT_STARTED});var i=this.buildState(t,e);if(!i){var o={code:d.default.ROUTE_NOT_FOUND};return a(o),
void this._invokeListeners("$$error",null,this.lastKnownState,o)}i.path=this.buildPath(t,e),this.lastStateAttempt=i;var u=!!this.lastKnownState&&this.areStatesEqual(this.lastKnownState,this.lastStateAttempt,!1);if(u&&!r.reload){var o={code:d.default.SAME_STATES};return a(o),void this._invokeListeners("$$error",i,this.lastKnownState,o)}var s=u?null:this.lastKnownState;return this._transition(i,u?null:this.lastKnownState,r,function(t,e){return t?void(t.redirect?n.navigate(t.redirect.name,t.redirect.params,{reload:!0},a):a(t)):(n._invokeListeners("$$success",e,s,r),void a(null,e))})}}]),t}();e.default=y},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function a(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i(t,e,n,r,i){var c=!1,f=t.getAdditionalArgs(),h=function(){return c},p=function(){return c=!0},v=function(n,r){n||h()||!t.options.autoCleanUp||!function(){var n=(0,u.nameToIDs)(e.name);Object.keys(t._canDeact).forEach(function(e){n.indexOf(e)===-1&&(t._canDeact[e]=void 0)})}(),i(h()?{code:d.default.TRANSITION_CANCELLED}:n,r||e)},m=function(t,e){return o({},t,e instanceof Object?e:{error:e})},g=(0,s.default)(e,n),y=g.toDeactivate,S=g.toActivate,b={isCancelled:h,toState:e,fromState:n,additionalArgs:[]},_=function(e,n,r){var i=y.filter(function(e){return t._canDeact[e]}).reduce(function(e,n){return o({},e,a({},n,t._canDeact[n]))},{});(0,l.default)(i,o({},b,{additionalArgs:f,errorKey:"segment"}),function(t){return r(t?m({code:d.default.CANNOT_DEACTIVATE},t):null)})},P=function(e,n,r){var i=S.filter(function(e){return t._canAct[e]}).reduce(function(e,n){return o({},e,a({},n,t._canAct[n]))},{});(0,l.default)(i,o({},b,{additionalArgs:f,errorKey:"segment"}),function(t){return r(t?m({code:d.default.CANNOT_ACTIVATE},t):null)})},A=t.mware,w=function(e,n,r){var a=Array.isArray(t.mware)?t.mware:[t.mware];(0,l.default)(a,o({},b,{additionalArgs:f}),function(t,n){return r(t?m({code:d.default.TRANSITION_ERR},t):null,n||e)})},E=(n&&!r.forceDeactivate?[_]:[]).concat(P).concat(A?w:[]);return(0,l.default)(E,b,v),p}var o=Object.assign||function(t){for(var e=1;arguments.length>e;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};Object.defineProperty(e,"__esModule",{value:!0});var u=n(1),s=r(u),c=n(9),l=r(c),f=n(2),d=r(f);e.default=i},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=(e.getPath=function(t){return t.split("?")[0]},e.getSearch=function(t){return t.split("?")[1]},/\[\]$/),r=e.hasBrackets=function(t){return n.test(t)},a=e.withoutBrackets=function(t){return t.replace(n,"")},i=e.parse=function(t){return t.split("&").reduce(function(t,e){var n=e.split("="),r=n[0],a=n[1];return t.concat(1===n.length?{name:r,value:!0}:{name:r,value:decodeURIComponent(a)})},[])},o=(e.toObject=function(t){return t.reduce(function(t,e){var n=e.name,i=e.value,o=r(n),u=t[a(n)];return void 0===u?t[a(n)]=o?[i]:i:t[a(n)]=[].concat(u,i),t},{})},e.build=function(t){return t.filter(function(t){var e=t.value;return void 0!==e&&null!==e}).map(function(t){var e=t.name,n=t.value;return n===!0?e:e+"="+encodeURIComponent(n)}).join("&")});e.omit=function(t,e){if(!t)return"";var n=i(t).filter(function(t){var n=t.name;return e.indexOf(a(n))===-1}),r=o(n);return r||""}}])});